extends ../../ui
include ../../common/views/post/content

block title
	= post.user.name + 'ã•ã‚“ã®' + post.createdAt + 'ã®æŠ•ç¨¿'

block meta
	meta(name='keywords', content='Misskey')
	meta(name='description', content= post.user.name + 'ã•ã‚“ã®' + post.createdAt + 'ã®æŠ•ç¨¿')

block header
	= post.user.name + 'ã•ã‚“ã®' + post.createdAt + 'ã®æŠ•ç¨¿'

block content
	main(role='main')
		article#post(
				class                   = post.type
				lang                    = post.user.lang
				itemscope
				itemtype                = 'http://schema.org/BlogPosting'
				data-id                 = post.id
				data-cursor             = post.cursor
				data-type               = post.type
				data-user-name          = post.user.name
				data-user-screen-name   = post.user.screenName
				data-is-liked          != login ? post.isLiked.toString() : null
				data-is-reposted       != login ? post.isReposted.toString() : null)
			if post.inReplyToPost
				+subPost(post.inReplyToPost)(class='reply-source')
			div.main
				div.avatar-area
					a.avatar-anchor(href= '/' + post.user.screenName)
						img.avatar(src= post.user.avatarThumbnailUrl, alt='avatar')
				header
					div.author(itemprop='author')
						if userSettings.displayUserNameInPost
							a.name(href= '/' + post.user.screenName)= post.user.name
							if post.user.isVerified
								img.verified-icon(src= config.resourcesUrl + '/common/verified.png', alt='verified', title='èªè¨¼æ¸ˆã¿')
						if userSettings.displayUserScreenNameInPost
							p.screen-name= post.user.screenName
					if userSettings.displayCreatedAtInPost
						a.time-anchor(href= '/' + post.user.screenName + '/' + post.id, itemprop='url')
							time(datetime= post.createdAt, itemprop='dateCreated', pubdate, data-display-type='relative')= post.createdAt
				div.content(itemprop='articleBody')
					+content(post)
			footer
				div.like
					button(title= post.isLiked ? 'Unlike' : 'Like')
						if userSettings.enableSushi
							i.fa
								| ğŸ£
						else
							i.fa.fa-star
					p.count
						= post.likesCount != 0 ? post.likesCount : ''
				div.repost
					button(title= post.isReposted ? 'ã‚·ã‚§ã‚¢ã‚’å–ã‚Šæ¶ˆã—' : 'ã‚·ã‚§ã‚¢')
						i.fa.fa-retweet
					p.count
						= post.repostsCount != 0 ? post.repostsCount : ''
				div.reply
					button(title='è¿”ä¿¡')
						i.fa.fa-reply
					p.count
						= post.repliesCount != 0 ? post.repliesCount : ''
			form#form
				textarea.ui-textarea#textarea(name='text', placeholder='ã“ã®æŠ•ç¨¿ã«è¿”ä¿¡ã™ã‚‹', role='textbox', aria-multiline)
				input.ui-input-file(name='file', type='file', accept='image/*')
				button.ui-button(type='submit')
					p è¿”ä¿¡
					i.fa.fa-paper-plane
				progress

mixin subPost(post)
	aside.sub-post(class!= attributes.class !== undefined ? attributes.class + ' ' + post.type : post.type
			data-id= post.id)
		a.avatar-anchor(href= '/' + post.user.screenName)
			img.avatar(src=post.user.avatarThumbnailUrl, alt='avatar')
		header
			if userSettings.displayUserNameInPost
				a.name(href= '/' + post.user.screenName)= post.user.name
				if post.user.isVerified
					img.verified-icon(src= config.resourcesUrl + '/common/verified.png', alt='verified', title='èªè¨¼æ¸ˆã¿')
			if userSettings.displayUserScreenNameInPost
				p.screen-name= post.user.screenName
			if userSettings.displayCreatedAtInPost
				a.time-anchor(href= '/' + post.user.screenName + '/' + post.id)
					time(datetime= post.createdAt, pubdate, data-display-type='relative')= post.createdAt
		div.main
			+content(post)
